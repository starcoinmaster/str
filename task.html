<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasks</title>
    <link rel="stylesheet" href="task.css">
    <link rel="stylesheet" href="tap.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
</head>
<body>
    <div class="main-container">
        <div class="task-container">
            <div class="task-header">
                <img src="star.png" alt="Star Logo" class="star-logo">
                <h2>See the tasks available</h2>
                <p>Weâ€™ll reward you immediately with points after each task completion.</p>
            </div>

            <!-- Slider tasks -->
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div class="task-item" onclick="handleTaskClick('https://t.me/star_coin_master', this, 100, 'task1')">
                            <div class="task-info">
                                <img src="telegram.png" alt="Telegram Logo" class="task-icon">
                                <div class="task-description">
                                    <p>Join Star Community</p>
                                    <span>+ 100 str</span>
                                </div>
                            </div>
                            <button class="claim-button" style="display: none;" onclick="claimPoints(event, this, 'task1')">Claim</button>
                        </div>
                    </div>

                    <div class="swiper-slide">
                        <div class="task-item" onclick="handleTaskClick('https://t.me/star_coin_master1', this, 100, 'task2')">
                            <div class="task-info">
                                <img src="telegram.png" alt="Telegram Logo" class="task-icon">
                                <div class="task-description">
                                    <p>Join Star Coin News</p>
                                    <span>+ 100 str</span>
                                </div>
                            </div>
                            <button class="claim-button" style="display: none;" onclick="claimPoints(event, this, 'task2')">Claim</button>
                        </div>
                    </div>
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
            </div>

            <!-- Non-slider tasks -->
            <div class="non-slider-tasks">
                <div class="non-slider-task" onclick="handleTaskClick('https://t.me/blum/app?startapp=ref_8vhUHveoeQ', this, 100, 'task3')">
                    <div class="task-info">
                        <img src="blum.png" alt="Blum Logo" class="task-icon">
                        <div class="task-description">
                            <p>Play Blum</p>
                            <span>+ 100 str</span>
                        </div>
                    </div>
                    <button class="claim-button" style="display: none;" onclick="claimPoints(event, this, 'task3')">Claim</button>
                </div>

                <div class="non-slider-task" onclick="handleTaskClick('https://t.me/star_coin_master_bot', this, 100, 'task4')">
                    <div class="task-info">
                        <img src="friend.png" alt="Friend Logo" class="task-icon">
                        <div class="task-description">
                            <p>Invite a friend to Star</p>
                            <span>+ 100 str</span>
                        </div>
                    </div>
                    <button class="claim-button" style="display: none;" onclick="claimPoints(event, this, 'task4')">Claim</button>
                </div>

                <div class="non-slider-task" onclick="handleTaskClick('https://t.me/major/start?startapp=6850021970', this, 100, 'task5')">
                    <div class="task-info">
                        <img src="major.png" alt="Major Logo" class="task-icon">
                        <div class="task-description">
                            <p>Play Major</p>
                            <span>+ 100 str</span>
                        </div>
                    </div>
                    <button class="claim-button" style="display: none;" onclick="claimPoints(event, this, 'task5')">Claim</button>
                </div>
            </div>
        </div>

        <div class="menu-container">
            <div class="round-box"></div>
            <div class="menu">
                <a href="index.html"><img src="tap.png" alt="Tap" class="menu-icon"></a>
                <a href="friend.html"><img src="friend.png" alt="Friend" class="menu-icon"></a>
                <a href="task.html"><img src="task.png" alt="Task" class="menu-icon"></a>
                <a href="withdraw.html"><img src="withdraw.png" alt="Withdraw" class="menu-icon"></a>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
       document.addEventListener("DOMContentLoaded", function () {
    // Initialize Swiper
    var swiper = new Swiper('.swiper-container', {
        direction: 'horizontal',
        loop: true,
        slidesPerView: 1,
        spaceBetween: 30,
        autoplay: {
            delay: 3000,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
    });

    // Check for claimed tasks and update buttons
    const claimButtons = document.querySelectorAll('.claim-button');
    const claimedTasks = JSON.parse(localStorage.getItem('claimedTasks')) || {};

    claimButtons.forEach(button => {
        const taskId = button.parentElement.onclick.toString().match(/'([^']+)'/)[1]; // Extract taskId

        if (claimedTasks[taskId]) {
            // Task already claimed
            button.textContent = "Claimed";
            button.style.backgroundColor = "gray"; // Change button color to indicate it's claimed
            button.style.pointerEvents = "none"; // Disable the claim button
            button.parentElement.style.pointerEvents = "none"; // Disable the entire task item
        } else {
            button.style.display = 'none'; // Hide button by default
        }
    });
});

function handleTaskClick(url, taskElement, points, taskId) {
    const claimedTasks = JSON.parse(localStorage.getItem('claimedTasks')) || {};
    if (claimedTasks[taskId]) return; // Prevent further clicks if claimed

    window.open(url, '_blank');
    const claimButton = taskElement.querySelector('.claim-button');
    claimButton.style.display = 'inline-block'; // Show claim button
}

function claimPoints(event, button, taskId) {
    event.stopPropagation(); // Prevent default action

    const claimedTasks = JSON.parse(localStorage.getItem('claimedTasks')) || {};
    if (claimedTasks[taskId]) return; // Prevent claiming if already claimed

    let userPoints = parseInt(localStorage.getItem('userPoints')) || 0;
    userPoints += 100; // Add 100 points
    localStorage.setItem('userPoints', userPoints);

    // Mark the task as claimed
    claimedTasks[taskId] = true;
    localStorage.setItem('claimedTasks', JSON.stringify(claimedTasks));

    // Update the button text and disable the task item
    button.textContent = "Claimed"; // Update button text to "Claimed"
    button.style.backgroundColor = "gray"; // Change button color to gray
    button.style.pointerEvents = "none"; // Disable the claim button

    // Disable the entire task item
    const taskElement = button.parentElement;
    taskElement.style.pointerEvents = "none"; // Disable entire task item
    taskElement.classList.add("claimed"); // Optional: add a class for styling
}

    </script>
</body>
</html>
